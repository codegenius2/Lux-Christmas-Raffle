import{v4 as x}from"uuid";function Q(){return x()}var N=(e=>(e.reactUi="client-sdk-react-ui",e.vanillaUi="client-sdk-vanilla-ui",e))(N||{}),T=(o=>(o.prod="https://www.crossmint.io",o.staging="https://staging.crossmint.io/",o.dev="http://localhost:3001",o))(T||{}),E=(e=>(e.clientVersion="X-Client-Version",e.clientName="X-Client-Name",e))(E||{}),Y=t=>t==="ETH",J=t=>t==="SOL",O=(o=>(o.CANDY_MACHINE="candy-machine",o.SOLANA_AUCTION="solana-auction",o.ERC_721="erc-721",o))(O||{}),U=(s=>(s.WAITING_SUBMISSION="waiting-submission",s.PENDING="pending",s.REJECTED="rejected",s.ACCEPTED="accepted",s.INVALID="invalid",s))(U||{});var f=(t="")=>{let n=["prod","production"];return t==="staging"?"https://staging.crossmint.io/":n.includes(t)||!t?"https://www.crossmint.io":t};var M="__crossmint-overlay__",A=400,k=750,D=()=>{let t=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return t?parseInt(t[2]):null};function L(t,n){function e(){return(window==null?void 0:window.top)!=null?window.top.outerWidth/2+window.top.screenX-t/2:window.outerWidth/2+window.screenX-t/2}function o(){return(window==null?void 0:window.top)!=null?window.top.outerHeight/2+window.top.screenY-n/2:window.outerHeight/2+window.screenY-n/2}let r=D();return`${r&&r>99?"popup=true,":""}height=${n},width=${t},left=${e()},top=${o()},resizable=yes,scrollbars=yes,toolbar=yes,menubar=true,location=no,directories=no, status=yes`}var _=t=>{let n=document.createElement("div");n.setAttribute("id",M);let e={width:"100vw",height:"100vh","background-color":"rgba(0, 0, 0, 0.5)",position:"fixed","z-index":"99999999",top:"0",left:"0"};Object.assign(n.style,e),document.body.appendChild(n),t&&n.addEventListener("click",()=>{B()})},B=()=>{let t=document.getElementById(M);t&&t.remove()};function F({clientId:t,libVersion:n,showOverlay:e,dismissOverlayOnClick:o,setConnecting:r,environment:s,clientName:a}){let u=(l,i,m,p,h,y,I)=>{let C=f(s),X=encodeURIComponent(`${C}/checkout/mint?${(()=>{let g={clientId:t,closeOnSuccess:"false",clientName:a,clientVersion:n,mintConfig:JSON.stringify(l)};return i&&(g.mintTo=i),m&&(g.emailTo=m),p&&(g.listingId=p),h&&(g.whPassThroughArgs=JSON.stringify(h)),y&&(g.paymentMethod=y.toLowerCase()),I&&(g.preferredSigninMethod=I),new URLSearchParams(g).toString()})()}`),b=`${C}/signin?callbackUrl=${X}`,P=window.open(b,"popUpWindow",L(A,k));if(P){w(P),e&&_(o);return}r(!1),window.open(b,"_blank")||console.error("Failed to open popup window and new tab")},S=(l,i,m,p,h,y,I)=>{r(!0),u(l,i,m,p,h,y,I)};function w(l){let i=setInterval(function(){l.closed&&(clearInterval(i),r(!1),e&&B())},500)}return{connect:S}}function Z({onClick:t,connecting:n,paymentMethod:e}){return{getButtonText:a=>{if(a)return"Connecting...";switch(e){case"ETH":return"Buy with ETH";case"SOL":return"Buy with SOL";default:return"Buy with credit card"}},shouldHideButton:({hideMintOnInactiveClient:a,status:u})=>a&&u!=="accepted",handleClick:(a,u)=>{t&&t(a),!n&&(a.defaultPrevented||u())}}}var R=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function v(t){return typeof t=="string"&&R.test(t)}var V=t=>{try{return v(t)}catch(n){return console.error(n),!1}};function rt({libVersion:t,clientId:n,platformId:e,auctionId:o,mintConfig:r,setStatus:s,environment:a,clientName:u}){async function S(){if(!n||n===""||n==="<YOUR_CLIENT_ID>"){console.error("You must enter your own Crossmint client ID in <CrossmintPayButton clientId=XXX>");return}if(!V(n)){console.error("The clientId passed to is invalid. Make sure to pass the clientId obtained from the crossmint team, with format XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXX");return}let i=f(a),m=await fetch(`${i}/api/crossmint/onboardingRequests/${n}/status`,{headers:{["X-Client-Version"]:t,["X-Client-Name"]:u}});if(m.status===200){let p=await m.json();s(p.status)}else s("invalid")}let w=()=>{let i=f(a);window.open(`${i}/developers/onboarding?${l()}`,"_blank")},l=()=>{let i={clientId:n};return e&&(i.platformId=e),o&&(i.auctionId=o),r&&(i.mintConfig=JSON.stringify(r)),new URLSearchParams(i).toString()};return{fetchClientIntegration:S,goToOnboarding:w}}function st({onClick:t}){return{getButtonText:r=>{switch(r){case"invalid":return"Invalid clientId";case"waiting-submission":return"Click here to setup Crossmint";case"pending":return"Your application is under review";case"accepted":return"You're good to go!";case"rejected":return"Your application was rejected"}},isButtonDisabled:r=>r!=="waiting-submission",handleClick:(r,s,a)=>{t&&t(r),s==="waiting-submission"&&a()}}}export{T as baseUrls,N as clientNames,F as crossmintModalService,Z as crossmintPayButtonService,st as crossmintStatusButtonService,rt as crossmintStatusService,E as customHeaders,Q as generateClientId,O as mintingContractTypes,U as onboardingRequestStatusResponse,Y as paymentMethodIsEth,J as paymentMethodIsSol};
